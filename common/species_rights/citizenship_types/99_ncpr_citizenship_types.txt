# from = country (the empire applying the citizenship)
# this = species (the species receiving the citizenship)

citizenship_necro_slavery = {
	is_slavery = yes

	in_breach_of = {
		{
			key = resolution_greatergood_balance_in_the_middle
		}
		{
			key = resolution_greatergood_universal_prosperity_mandate
		}
	}

	potential = {
		exists = from
		from = {
			has_origin = origin_necropurifier
		}
		has_species_flag = necrophage_purifier_prepatent
	}

	allow = {
		# This won't even appear for species unless they're the prepatent of a
		# necro purifier, so don't worry about custom tooltips here
		hidden_trigger = { exists = from }
		custom_tooltip = {
			fail_text = same_species_disallowed
			NOT = { is_same_species = from }
		}
		custom_tooltip = {
			fail_text = NECROPURIFIERS_MUST_PURGE
			NOT = { has_species_flag = necrophage_purifier_prepatent }
		}
	}
	ai_will_do = {
		# AI should not use this origin
		factor = 0
	}
}